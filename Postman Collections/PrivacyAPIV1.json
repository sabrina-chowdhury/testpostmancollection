{
  "info": {
    "_postman_id": "3b581e7f-4c4c-4599-a041-b5ad1a4dc6ce",
    "name": "PrivacyAPIV1",
    "description": "The Telia Privacy Service APIs helps you manage consent and legitimate interest as legal grounds for end users personal data with your application",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "6d49158c-f8e1-4f14-b921-6e86f56abe4c",
      "name": "v1",
      "description": "Folder for v1",
      "item": [
        {
          "_postman_id": "b7af2e74-d541-4f14-a391-5bad21e9154d",
          "name": "Request 1",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e1c86d8f-aeaa-4483-ba9e-20d704c06c24",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "90153dc1-b6f7-4d15-87f7-7cc3b5310db4",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([201,202]);",
                  "});",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"\",\n  \"purposes\": [\n    {\n      \"purposeId\": \"b663aaef-852c-4937-9dc1-b3189ecf72ed\",\n      \"referenceId\": \"consent-td-marketing\",\n      \"category\": [\n        \"marketing\"\n      ],\n      \"dataIds\": [\n        \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"\n      ],\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"Processing of traffic data for marketing purposes\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"sv-SE\",\n          \"text\": \"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att ge mig personliga och anpassade erbjudanden.\"\n        }\n      ],\n      \"legalGround\": \"ic\",\n      \"objectionable\": false,\n      \"onLogin\": true,\n      \"retention\": 0,\n      \"termination\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"N/A\"\n        }\n      ],\n      \"thirdPartyDisclosure\": false,\n      \"thirdPartyIds\": []\n    },\n    {\n      \"purposeId\": \"ddad99dd-aa22-426d-a5fe-c716ce98aa41\",\n      \"referenceId\": \"consent-td-service-improvement\",\n      \"category\": [\n        \"improvements\"\n      ],\n      \"dataIds\": [\n        \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"\n      ],\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"Processing of traffic data for improving network and services\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"sv-SE\",\n          \"text\": \"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att f\u00f6rb\u00e4ttra tj\u00e4nster och n\u00e4t.\"\n        }\n      ],\n      \"legalGround\": \"ic\",\n      \"objectionable\": false,\n      \"onLogin\": true,\n      \"retention\": 0,\n      \"termination\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"N/A\"\n        }\n      ],\n      \"thirdPartyDisclosure\": false,\n      \"thirdPartyIds\": []\n    }\n  ],\n  \"data\": [\n    {\n      \"category\": \"default\",\n      \"type\": \"default\",\n      \"referenceId\": \"default\",\n      \"dataId\": \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\",\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"default\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"default\"\n        }\n      ],\n      \"accessible\": false,\n      \"erasable\": false,\n      \"portable\": false,\n      \"source\": {\n        \"description\": [\n          {\n            \"language\": \"sv-SE\",\n            \"text\": \"Den nya generationens telekomf\u00f6retag\"\n          }\n        ],\n        \"name\": [\n          {\n            \"language\": \"sv-SE\",\n            \"text\": \"Telia Sverige AB\"\n          }\n        ]\n      }\n    }\n  ],\n  \"meta\": {\n    \"address\": \"Telia Sverige AB, Svarspost 108317743, 978 00 Lule\u00e5\",\n    \"contact\": \"Ann Ekstrand\",\n    \"email\": \"privacy@telia.se\",\n    \"jurisdiction\": \"EU\",\n    \"onBehalf\": false,\n    \"org\": \"Telia Sverige AB\",\n    \"orgNo\": \"556430-0142\",\n    \"phone\": \"+46XXXX\",\n    \"policies\": {\n      \"privacy\": \"https://www.telia.se/privat/om/integritetspolicy\",\n      \"terms\": \"https://www.telia.se/privat/om/villkor\"\n    },\n    \"serviceName\": [\n      {\n        \"language\": \"sv-SE\",\n        \"text\": \"Telia Sverige\"\n      }\n    ]\n  }\n}\n"
            },
            "url": "{{baseUrl}}/v1/configurations",
            "description": "Set the complete configuration for a project\n"
          },
          "response": []
        },
        {
          "_postman_id": "57bd4ed7-54a3-4987-a61e-2e0961478e54",
          "name": "Request 2",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "c7a00f64-58db-4a40-ace9-cc4abba67b21",
                "type": "text/javascript",
                "exec": [
                  ""
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e6af089c-d917-4cae-b3d5-3dd002c0a1d4",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Successful get request\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  "",
                  "",
                  "",
                  "var jsonData = pm.response.json();",
                  "",
                  "",
                  "pm.test(\"Empty Responsebody check\", function () {",
                  "    pm.response.to.not.have.jsonBody(\"\");",
                  "});",
                  "",
                  "pm.test(\"Response should not error\", function() {",
                  "    pm.response.to.not.error;",
                  "});",
                  "",
                  "",
                  "var schema = {",
                  "  \"type\": \"object\",",
                  "  \"properties\": {",
                  "    \"purposes\": {",
                  "      \"type\": \"array\",",
                  "      \"items\": {",
                  "        \"type\": \"object\",",
                  "        \"properties\": {",
                  "          \"version\": {",
                  "            \"$id\": \"/properties/purposes/items/properties/version\",",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"purposeId\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"onLogin\": {",
                  "          },",
                  "          \"created\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"thirdPartyDisclosure\": {",
                  "            \"type\": \"boolean\",",
                  "          },",
                  "          \"dataIds\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"string\",",
                  "            }",
                  "          },",
                  "          \"objectionable\": {",
                  "            \"type\": \"boolean\",",
                  "          },",
                  "          \"updated\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"termination\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"object\",",
                  "              \"properties\": {",
                  "                \"language\": {",
                  "                  \"type\": \"string\",",
                  "                },",
                  "                \"text\": {",
                  "                  \"type\": \"string\",",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"retention\": {",
                  "            \"type\": \"integer\",",
                  "          },",
                  "          \"category\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"string\",",
                  "            }",
                  "          },",
                  "          \"legalGround\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"thirdPartyIds\": {",
                  "            \"type\": \"array\"",
                  "          },",
                  "          \"description\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"object\",",
                  "              \"properties\": {",
                  "                \"language\": {",
                  "                  \"type\": \"string\",",
                  "                  },",
                  "                \"text\": {",
                  "                  \"type\": \"string\",",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"title\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"object\",",
                  "              \"properties\": {",
                  "                \"language\": {",
                  "                  \"type\": \"string\",",
                  "                },",
                  "                \"text\": {",
                  "                  \"type\": \"string\",",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"referenceId\": {",
                  "            \"type\": \"string\",",
                  "          }",
                  "        }",
                  "      }",
                  "    },",
                  "    \"meta\": {",
                  "      \"type\": \"object\",",
                  "      \"properties\": {",
                  "        \"org\": {",
                  "          \"type\": \"string\",",
                  "        },",
                  "        \"orgNo\": {",
                  "          \"type\": \"string\",",
                  "        },",
                  "        \"onBehalf\": {",
                  "          \"type\": \"boolean\",",
                  "        },",
                  "        \"serviceName\": {",
                  "          \"type\": \"array\",",
                  "          \"items\": {",
                  "            \"type\": \"object\",",
                  "            \"properties\": {",
                  "              \"language\": {",
                  "                \"type\": \"string\",",
                  "              },",
                  "              \"text\": {",
                  "                \"type\": \"string\",",
                  "              }",
                  "            }",
                  "          }",
                  "        },",
                  "        \"contact\": {",
                  "          \"type\": \"string\",",
                  "        },",
                  "        \"address\": {",
                  "          \"type\": \"string\",",
                  "        },",
                  "        \"jurisdiction\": {",
                  "          \"type\": \"string\",",
                  "        },",
                  "        \"policies\": {",
                  "          \"type\": \"object\",",
                  "          \"properties\": {",
                  "            \"privacy\": {",
                  "              \"type\": \"string\",",
                  "            },",
                  "            \"terms\": {",
                  "              \"type\": \"string\",",
                  "          }",
                  "          }",
                  "        },",
                  "        \"email\": {",
                  "          \"type\": \"string\",",
                  "      },",
                  "        \"phone\": {",
                  "          \"type\": \"string\",",
                  "        }",
                  "      }",
                  "    },",
                  "    \"thirdParties\": {",
                  "      \"$id\": \"/properties/thirdParties\",",
                  "      \"type\": \"array\"",
                  "    },",
                  "    \"data\": {",
                  "      \"type\": \"array\",",
                  "      \"items\": {",
                  "        \"type\": \"object\",",
                  "        \"properties\": {",
                  "          \"created\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"portable\": {",
                  "            \"type\": \"boolean\",",
                  "          },",
                  "          \"source\": {",
                  "            \"type\": \"object\",",
                  "            \"properties\": {",
                  "              \"name\": {",
                  "                \"type\": \"array\",",
                  "                \"items\": {",
                  "                  \"type\": \"object\",",
                  "                  \"properties\": {",
                  "                    \"language\": {",
                  "                      \"type\": \"string\",",
                  "                      },",
                  "                    \"text\": {",
                  "                      \"type\": \"string\",",
                  "                    }",
                  "                  }",
                  "                }",
                  "              },",
                  "              \"description\": {",
                  "                \"type\": \"array\",",
                  "                \"items\": {",
                  "                  \"type\": \"object\",",
                  "                  \"properties\": {",
                  "                    \"language\": {",
                  "                      \"type\": \"string\",",
                  "                  },",
                  "                    \"text\": {",
                  "                      \"type\": \"string\",",
                  "                  }",
                  "                  }",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"accessible\": {",
                  "            \"type\": \"boolean\",",
                  "          },",
                  "          \"dataId\": {",
                  "            \"type\": \"string\",",
                  "            },",
                  "          \"updated\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"erasable\": {",
                  "            \"type\": \"boolean\",",
                  "        },",
                  "          \"category\": {",
                  "            \"type\": \"string\",",
                  "        },",
                  "          \"description\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"object\",",
                  "              \"properties\": {",
                  "                \"language\": {",
                  "                  \"type\": \"string\",",
                  "            },",
                  "                \"text\": {",
                  "                  \"type\": \"string\",",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"referenceId\": {",
                  "            \"type\": \"string\",",
                  "          },",
                  "          \"title\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "              \"type\": \"object\",",
                  "              \"properties\": {",
                  "                \"language\": {",
                  "                  \"type\": \"string\",",
                  "                },",
                  "                \"text\": {",
                  "                  \"type\": \"string\",",
                  "                }",
                  "              }",
                  "            }",
                  "          },",
                  "          \"type\": {",
                  "            \"type\": \"string\",",
                  "          }",
                  "        }",
                  "      }",
                  "    }",
                  "  }",
                  "};",
                  "",
                  "",
                  "pm.test('Schema is valid', function() {",
                  "  pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                  "});",
                  "",
                  "",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"projectId\": \"\",\n  \"purposes\": [\n    {\n      \"purposeId\": \"b663aaef-852c-4937-9dc1-b3189ecf72ed\",\n      \"referenceId\": \"consent-td-marketing\",\n      \"category\": [\n        \"marketing\"\n      ],\n      \"dataIds\": [\n        \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"\n      ],\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"Processing of traffic data for marketing purposes\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"sv-SE\",\n          \"text\": \"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att ge mig personliga och anpassade erbjudanden.\"\n        }\n      ],\n      \"legalGround\": \"ic\",\n      \"objectionable\": false,\n      \"onLogin\": true,\n      \"retention\": 0,\n      \"termination\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"N/A\"\n        }\n      ],\n      \"thirdPartyDisclosure\": false,\n      \"thirdPartyIds\": []\n    },\n    {\n      \"purposeId\": \"ddad99dd-aa22-426d-a5fe-c716ce98aa41\",\n      \"referenceId\": \"consent-td-service-improvement\",\n      \"category\": [\n        \"improvements\"\n      ],\n      \"dataIds\": [\n        \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"\n      ],\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"Processing of traffic data for improving network and services\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"sv-SE\",\n          \"text\": \"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att f\u00f6rb\u00e4ttra tj\u00e4nster och n\u00e4t.\"\n        }\n      ],\n      \"legalGround\": \"ic\",\n      \"objectionable\": false,\n      \"onLogin\": true,\n      \"retention\": 0,\n      \"termination\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"N/A\"\n        }\n      ],\n      \"thirdPartyDisclosure\": false,\n      \"thirdPartyIds\": []\n    }\n  ],\n  \"data\": [\n    {\n      \"category\": \"default\",\n      \"type\": \"default\",\n      \"referenceId\": \"default\",\n      \"dataId\": \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\",\n      \"title\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"default\"\n        }\n      ],\n      \"description\": [\n        {\n          \"language\": \"en-US\",\n          \"text\": \"default\"\n        }\n      ],\n      \"accessible\": false,\n      \"erasable\": false,\n      \"portable\": false,\n      \"source\": {\n        \"description\": [\n          {\n            \"language\": \"sv-SE\",\n            \"text\": \"Den nya generationens telekomf\u00f6retag\"\n          }\n        ],\n        \"name\": [\n          {\n            \"language\": \"sv-SE\",\n            \"text\": \"Telia Sverige AB\"\n          }\n        ]\n      }\n    }\n  ],\n  \"meta\": {\n    \"address\": \"Telia Sverige AB, Svarspost 108317743, 978 00 Lule\u00e5\",\n    \"contact\": \"Ann Ekstrand\",\n    \"email\": \"privacy@telia.se\",\n    \"jurisdiction\": \"EU\",\n    \"onBehalf\": false,\n    \"org\": \"Telia Sverige AB\",\n    \"orgNo\": \"556430-0142\",\n    \"phone\": \"+46XXXX\",\n    \"policies\": {\n      \"privacy\": \"https://www.telia.se/privat/om/integritetspolicy\",\n      \"terms\": \"https://www.telia.se/privat/om/villkor\"\n    },\n    \"serviceName\": [\n      {\n        \"language\": \"sv-SE\",\n        \"text\": \"Telia Sverige\"\n      }\n    ]\n  }\n}\n"
            },
            "url": "{{baseUrl}}/v1/configurations",
            "description": "Read the complete configuration for a project\n"
          },
          "response": [
            {
              "id": "30344fe8-a24f-4739-8871-930d33a80bff",
              "name": "Request 2",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "",
                    "value": "",
                    "disabled": true
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": ""
                },
                "url": "{{baseUrl}}/v1/configurations"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Connection",
                  "value": "keep-alive",
                  "name": "Connection",
                  "description": "Options that are desired for the connection"
                },
                {
                  "key": "Content-Length",
                  "value": "2334",
                  "name": "Content-Length",
                  "description": "The length of the response body in octets (8-bit bytes)"
                },
                {
                  "key": "Content-Type",
                  "value": "application/json",
                  "name": "Content-Type",
                  "description": "The mime type of this content"
                },
                {
                  "key": "Date",
                  "value": "Wed, 06 Jun 2018 21:50:25 GMT",
                  "name": "Date",
                  "description": "The date and time that the message was sent"
                },
                {
                  "key": "Via",
                  "value": "1.1 208ed8b46a45d58d14b6e0be1aab3dad.cloudfront.net (CloudFront)",
                  "name": "Via",
                  "description": "Informs the client of proxies through which the response was sent."
                },
                {
                  "key": "X-Amz-Cf-Id",
                  "value": "BLJBYWYHj1ZWLJfk-gCieWzn19xKZfs751baDORe1t-5_xjgd7FQTg==",
                  "name": "X-Amz-Cf-Id",
                  "description": "Custom header"
                },
                {
                  "key": "X-Amzn-Trace-Id",
                  "value": "Root=1-5b185721-22118a7d460fd0f4e9757677",
                  "name": "X-Amzn-Trace-Id",
                  "description": "Custom header"
                },
                {
                  "key": "X-Cache",
                  "value": "Miss from cloudfront",
                  "name": "X-Cache",
                  "description": "Custom header"
                },
                {
                  "key": "x-amz-apigw-id",
                  "value": "IFKNRHY3DoEF2kw=",
                  "name": "x-amz-apigw-id",
                  "description": "Custom header"
                },
                {
                  "key": "x-amzn-RequestId",
                  "value": "9ebe7d97-69d3-11e8-ae8b-2df199cca5fe",
                  "name": "x-amzn-RequestId",
                  "description": "Custom header"
                }
              ],
              "cookie": [],
              "responseTime": null,
              "body": "{\"purposes\":[{\"version\":\"1.54.0\",\"purposeId\":\"b663aaef-852c-4937-9dc1-b3189ecf72ed\",\"onLogin\":true,\"created\":\"2018-06-06T19:33:11.610Z\",\"thirdPartyDisclosure\":false,\"dataIds\":[\"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"],\"objectionable\":false,\"updated\":\"2018-06-06T19:33:11.610Z\",\"termination\":[{\"language\":\"en-US\",\"text\":\"N/A\"}],\"retention\":0,\"category\":[\"marketing\"],\"legalGround\":\"ic\",\"thirdPartyIds\":[],\"description\":[{\"language\":\"sv-SE\",\"text\":\"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att ge mig personliga och anpassade erbjudanden.\"}],\"title\":[{\"language\":\"en-US\",\"text\":\"Processing of traffic data for marketing purposes\"}],\"referenceId\":\"consent-td-marketing\"},{\"version\":\"1.54.0\",\"purposeId\":\"ddad99dd-aa22-426d-a5fe-c716ce98aa41\",\"onLogin\":true,\"created\":\"2018-06-06T19:33:11.705Z\",\"thirdPartyDisclosure\":false,\"dataIds\":[\"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\"],\"objectionable\":false,\"updated\":\"2018-06-06T19:33:11.705Z\",\"termination\":[{\"language\":\"en-US\",\"text\":\"N/A\"}],\"retention\":0,\"category\":[\"improvements\"],\"legalGround\":\"ic\",\"thirdPartyIds\":[],\"description\":[{\"language\":\"sv-SE\",\"text\":\"Jag godk\u00e4nner att ni hanterar data om hur jag anv\u00e4nder mina tj\u00e4nster f\u00f6r att f\u00f6rb\u00e4ttra tj\u00e4nster och n\u00e4t.\"}],\"title\":[{\"language\":\"en-US\",\"text\":\"Processing of traffic data for improving network and services\"}],\"referenceId\":\"consent-td-service-improvement\"}],\"meta\":{\"org\":\"Telia Sverige AB\",\"orgNo\":\"556430-0142\",\"onBehalf\":false,\"serviceName\":[{\"language\":\"sv-SE\",\"text\":\"Telia Sverige\"}],\"contact\":\"Ann Ekstrand\",\"address\":\"Telia Sverige AB, Svarspost 108317743, 978 00 Lule\u00e5\",\"jurisdiction\":\"EU\",\"policies\":{\"privacy\":\"https://www.telia.se/privat/om/integritetspolicy\",\"terms\":\"https://www.telia.se/privat/om/villkor\"},\"email\":\"privacy@telia.se\",\"phone\":\"+46XXXX\"},\"thirdParties\":[],\"data\":[{\"created\":\"2018-05-09T10:11:36.892Z\",\"portable\":false,\"source\":{\"name\":[{\"language\":\"sv-SE\",\"text\":\"Telia Sverige AB\"}],\"description\":[{\"language\":\"sv-SE\",\"text\":\"Den nya generationens telekomf\u00f6retag\"}]},\"accessible\":false,\"dataId\":\"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\",\"updated\":\"2018-06-06T19:33:11.506Z\",\"erasable\":false,\"category\":\"default\",\"description\":[{\"language\":\"en-US\",\"text\":\"default\"}],\"referenceId\":\"default\",\"title\":[{\"language\":\"en-US\",\"text\":\"default\"}],\"type\":\"default\"}]}"
            }
          ]
        },
        {
          "_postman_id": "23b21838-78ce-4fd4-84ec-56ba9de7aedb",
          "name": "Request 3",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "3248c227-ee72-45d3-809e-d368e07950bc",
                "type": "text/javascript",
                "exec": [
                  "",
                  "var uuid = require('uuid'); ",
                  "var user = uuid.v4();",
                  "",
                  "pm.environment.set(\"userId\", user);",
                  "",
                  "pm.environment.get(\"userId\");"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "57642943-d064-4653-bda9-6420791d1c51",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Successful POST request\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([201,202]);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "",
                  "pm.test(\"UserId in request and response should match\", function() {",
                  "    pm.expect(pm.environment.get(\"userId\")).to.be.eql(jsonData.subject);",
                  "});",
                  "",
                  "",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"collectionMethod\": \"web form\",\n    \"consented\": \"2017-11-21T12:52:24.670+01:00\",\n    \"internalReference\": {\n        \"salesPerson\": \"John Doe\"\n    },\n    \"language\": \"nb-NO\",\n    \"userId\": \"{{userId}}\",\n    \"purposes\": [\n        {\n            \"dataIds\": [\n                {\n                    \"dataId\": \"388a3310-1e03-4449-9d0d-d4f2ba0bac3c\",\n                    \"status\": \"denied\"\n                }\n\n            ],\n            \"purposeId\": \"b663aaef-852c-4937-9dc1-b3189ecf72ed\",\n            \"status\": \"approved\",\n            \"version\": \"1.0.0\"\n        }\n    ]\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/:userId/consents",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "users",
                ":userId",
                "consents"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Store the consent given or rejected by a user\nWill create a new Consent Receipt\n"
          },
          "response": []
        },
        {
          "_postman_id": "7ba8aab8-5ea0-4916-99a8-e14c5eb1c90a",
          "name": "Request 4",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e4378b0a-94af-47ce-b908-31905eba855c",
                "type": "text/javascript",
                "exec": [
                  "pm.environment.get(\"userId\");"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "69c1b07d-3ef7-4a10-bb09-b9ed5078911e",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  "",
                  "pm.test(\"Request is ok\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "var jsonData = pm.response.json();",
                  "",
                  "console.log(jsonData.userId);",
                  "pm.test(\"UserId in request and response should match\", function() {",
                  "    pm.expect(pm.environment.get(\"userId\")).to.be.eql(jsonData.userId);",
                  "});",
                  "",
                  "",
                  "",
                  "",
                  "pm.environment.set(\"projectId\", pm.response.json().projectId);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/:userId/states",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "users",
                ":userId",
                "states"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Get a user's Consent State\n"
          },
          "response": []
        },
        {
          "_postman_id": "9e489e6f-9ebf-4ce9-89c6-e4e810d8e817",
          "name": "Request 6",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e2b47dca-9a34-4af4-80bf-e1ccd4acf0c9",
                "type": "text/javascript",
                "exec": [
                  "pm.environment.get(\"userId\");"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "898a722c-23d0-46d5-bb79-4ceeac02e3a2",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/configurations/users/:userId",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "configurations",
                "users",
                ":userId"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Read the complete configuration for a project including the state from the user\n"
          },
          "response": []
        },
        {
          "_postman_id": "e592ece7-d3b8-452d-a4eb-06ca04e26bcd",
          "name": "Request 7",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "c53cfc18-f071-45e5-9518-4dc9c5c12ed0",
                "type": "text/javascript",
                "exec": [
                  "pm.environment.get(\"userId\");"
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "5d99796d-f7a9-464a-a4a2-703e83ffe2d8",
                "type": "text/javascript",
                "exec": [
                  "",
                  "",
                  "pm.test(\"Response is ok\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.environment.set(\"receiptId\", jsonData.purposes.answered[0].consentReceiptId);",
                  "",
                  "",
                  "",
                  "pm.test(\"Empty Response body check\", function () {",
                  "    pm.response.to.not.have.jsonBody(\"\");",
                  "});",
                  "",
                  "pm.test(\"Response should not error\", function() {",
                  "    pm.response.to.not.be.error;",
                  "});",
                  "",
                  "",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/:userId/configurations",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "users",
                ":userId",
                "configurations"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Get a configuration enriched with user state,\ncontaining a list of the latest purposes and the versions of purposes answered by the user.\n"
          },
          "response": []
        },
        {
          "_postman_id": "2766a35f-073f-4e1c-a6c6-b3ecf22d30b4",
          "name": "Request 8",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "28735939-848d-4d64-bb2a-f915bf4eb34b",
                "type": "text/javascript",
                "exec": [
                  "pm.environment.get(\"userId\");",
                  "pm.environment.get(\"receiptId\");",
                  "",
                  "",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "d7ffe340-0185-4c4e-bc53-ef8f1bf176cb",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "",
                  "",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/:userId/receipts/:receiptId",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "users",
                ":userId",
                "receipts",
                ":receiptId"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                },
                {
                  "key": "receiptId",
                  "value": "{{receiptId}}"
                }
              ]
            },
            "description": "Get a user's receipt with receipt ID\n"
          },
          "response": []
        },
        {
          "_postman_id": "dd847845-f3c7-4466-928b-25b7007458d2",
          "name": "Request 5",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f3198dfa-4a45-4668-884f-c287c9d52d95",
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Deleted Successfully\", function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/:userId/states",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "users",
                ":userId",
                "states"
              ],
              "variable": [
                {
                  "key": "userId",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Delete the users current state, resetting everything for the user\n"
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              ""
            ],
            "id": "21f67808-cfa8-40d3-bbff-007385a88e94",
            "type": "text/javascript"
          }
        },
        {
          "listen": "test",
          "script": {
            "exec": [
              ""
            ],
            "id": "07dbd4d7-0909-4785-a548-70f21d2e09ac",
            "type": "text/javascript"
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{currentAccessToken}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "482624b9-a868-4433-9026-24974147cac5",
        "type": "text/javascript",
        "exec": [
          "",
          "\tconst echoPostRequest = {",
          "\t\turl: data.tokenUrl,",
          "\t\tmethod: 'POST',",
          "\t\theader: 'Content-type: application/x-www-form-urlencoded',",
          "\t\tbody: {",
          "\t\t\tmode: 'urlencoded',",
          "\t\t\turlencoded: [",
          "\t\t\t\t{ key: \"grant_type\", value: \"client_credentials\" },",
          "\t\t\t\t{ key: \"client_id\", value: data.clientId },",
          "\t\t\t\t{ key: \"client_secret\", value: data.clientSecret }",
          "\t\t\t  ",
          "\t\t\t]",
          "\t\t}",
          "",
          "\t};",
          "\t",
          "",
          "",
          "var getToken = true;",
          "",
          "if (!pm.environment.get('accessTokenExpiry') ||",
          "\t!pm.environment.get('currentAccessToken')) {",
          "\tconsole.log('Token or expiry date are missing')",
          "} else if (pm.environment.get('accessTokenExpiry') <= (new Date()).getTime()) {",
          "\tconsole.log('Token is expired')",
          "} else {",
          "\tgetToken = false;",
          "\tconsole.log('Token and expiry date are all good');",
          "}",
          "",
          "if (getToken === true) {",
          "\tpm.sendRequest(echoPostRequest, function (err, res, body) {",
          "\t\t// console.log(err ? err : res.json());",
          "\t\tif (err === null) {",
          "\t\t\tconsole.log('Saving the token and expiry date')",
          "\t\t\tvar responseJson = res.json();",
          "\t\t\tpm.environment.set('currentAccessToken', responseJson.access_token)",
          "",
          "\t\t\tvar expiryDate = new Date();",
          "\t\t\texpiryDate.setSeconds(expiryDate.getSeconds() + responseJson.expires_in);",
          "\t\t\tpm.environment.set('accessTokenExpiry', expiryDate.getTime());",
          "\t\t}",
          "\t});",
          "}",
          "",
          "pm.environment.set(\"baseUrl\", data.serviceUrl);",
          "",
          "",
          "",
          "",
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "1b1f4319-a6d4-4ea9-9039-d7d2026118ff",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "028dbda6-24f5-40d2-b6ad-ed60839de389",
      "key": "currentAccessToken",
      "value": "",
      "type": "string"
    },
    {
      "id": "f5b94c85-1b0a-462f-8294-4a79aeafd7a0",
      "key": "accessTokenExpiry",
      "value": "",
      "type": "string"
    },
    {
      "id": "27da2ba7-8dc7-4f2c-aee3-452bdcea8488",
      "key": "baseUrl",
      "value": "",
      "type": "string",
      "description": ""
    },
    {
      "id": "c6200b47-0013-4b09-b065-fd5a883c2bb9",
      "key": "userId",
      "value": "",
      "type": "string",
      "description": ""
    }
  ]
}